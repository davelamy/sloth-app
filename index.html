<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sloth Photo Finder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.7s ease-out;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-12">
            <div class="text-6xl mb-4 animate-bounce">ü¶•</div>
            <h1 class="text-4xl md:text-5xl font-bold text-green-800 mb-3">
                Sloth Photo Finder
            </h1>
            <p class="text-lg text-green-600 max-w-md mx-auto">
                Discover peaceful moments with adorable sloths. Take a deep breath and slow down.
            </p>
        </div>

        <!-- Main Content -->
        <div class="max-w-4xl mx-auto">
            <!-- Action Button -->
            <div class="text-center mb-8">
                <button
                    id="findSlothBtn"
                    class="inline-flex items-center gap-3 px-8 py-4 rounded-full text-white text-xl font-semibold
                           transition-all duration-300 transform hover:scale-105 active:scale-95 shadow-lg
                           bg-green-600 hover:bg-green-700 hover:shadow-xl"
                >
                    <span class="text-2xl">üîç</span>
                    Find Me a Sloth!
                </button>
            </div>

            <!-- Loading Animation -->
            <div id="loading" class="hidden text-center mb-8">
                <button class="inline-flex items-center gap-3 px-8 py-4 rounded-full text-white text-xl font-semibold
                               bg-green-400 cursor-not-allowed">
                    <div class="animate-spin rounded-full h-6 w-6 border-2 border-white border-t-transparent"></div>
                    Finding a sloth...
                </button>
            </div>

            <!-- Error Message -->
            <div id="error" class="hidden bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4 mb-8 rounded-r-lg">
                <div class="flex items-center">
                    <span class="text-xl mr-2">ü¶•</span>
                    <span id="errorMessage"></span>
                </div>
            </div>

            <!-- Photo Display -->
            <div id="photoDisplay" class="hidden">
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden transform transition-all duration-700 ease-out animate-fade-in">
                    <div class="relative">
                        <img id="slothPhoto" 
                             class="w-full h-auto max-h-96 object-cover"
                             loading="lazy">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent"></div>
                        <div class="absolute bottom-4 left-4 right-4">
                            <p class="text-white text-sm font-medium drop-shadow-lg">
                                üì∏ <span id="photoSource"></span>
                            </p>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 id="photoAlt" class="text-xl font-semibold text-gray-800 mb-3"></h3>
                        <p id="slothFact" class="text-green-700 bg-green-50 rounded-lg p-4 italic"></p>
                    </div>
                </div>
            </div>

            <!-- Welcome Message -->
            <div id="welcome" class="text-center py-12">
                <div class="text-8xl mb-6 filter drop-shadow-lg">ü¶•</div>
                <h2 class="text-3xl text-green-700 mb-4 font-semibold">Ready to meet some sloths?</h2>
                <p class="text-green-600 max-w-md mx-auto text-lg">
                    Click the button above to discover your first sloth friend! 
                    Each click brings you a real sloth photo with fascinating facts.
                </p>
            </div>
        </div>

        <!-- Info Footer -->
        <div class="mt-16 text-center">
            <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 max-w-2xl mx-auto shadow-lg">
                <h3 class="text-lg font-semibold text-green-800 mb-3">üåø About This App</h3>
                <p class="text-green-700">
                    This app showcases real sloth photographs from various sources, 
                    paired with fascinating facts about these amazing creatures. 
                    Take a moment to appreciate the art of slowing down!
                </p>
            </div>
        </div>
    </div>

    <script>
        const findSlothBtn = document.getElementById('findSlothBtn');
        const loading = document.getElementById('loading');
        const error = document.getElementById('error');
        const errorMessage = document.getElementById('errorMessage');
        const photoDisplay = document.getElementById('photoDisplay');
        const welcome = document.getElementById('welcome');
        const slothPhoto = document.getElementById('slothPhoto');
        const photoAlt = document.getElementById('photoAlt');
        const photoSource = document.getElementById('photoSource');
        const slothFact = document.getElementById('slothFact');

        const slothFacts = [
            "üí° <strong>Sloth Fact:</strong> Sloths can turn their heads 270 degrees to survey their surroundings!",
            "üí° <strong>Sloth Fact:</strong> A sloth's top speed is 0.27 km/h - they've mastered the art of taking it slow!",
            "üí° <strong>Sloth Fact:</strong> Sloths only climb down from trees once a week to go to the bathroom!",
            "üí° <strong>Sloth Fact:</strong> Baby sloths cling to their mothers for up to 9 months after birth!",
            "üí° <strong>Sloth Fact:</strong> Sloths have been around for 35 million years - they're ancient zen masters!",
            "üí° <strong>Sloth Fact:</strong> A sloth's slow movement helps them avoid detection by predators!",
            "üí° <strong>Sloth Fact:</strong> Sloths sleep 15-20 hours per day - truly living the dream life!",
            "üí° <strong>Sloth Fact:</strong> Algae grows on sloth fur, giving them natural camouflage and a mobile ecosystem!",
            "üí° <strong>Sloth Fact:</strong> Two-toed sloths are actually more closely related to anteaters than three-toed sloths!",
            "üí° <strong>Sloth Fact:</strong> Sloths have a four-chambered stomach like cows to digest tough leaves!"
        ];

        async function fetchSlothPhoto() {
            // Show loading state
            findSlothBtn.style.display = 'none';
            loading.classList.remove('hidden');
            error.classList.add('hidden');
            photoDisplay.classList.add('hidden');

            try {
                const unsplashAccessKey = '9BOZewBzHli9XbpZySiESB5kOzGVetbhzXAKr378eBk';
                let photoData = null;

                // High-quality curated sloth photos as ultimate fallback
                const curatedSlothPhotos = [
                    {
                        url: 'https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=800&auto=format&fit=crop',
                        alt: 'A three-toed sloth hanging peacefully from a tree branch',
                        photographer: 'Javier Mazzeo',
                        source: 'Unsplash'
                    },
                    {
                        url: 'https://images.unsplash.com/photo-1544735716-392fe2489ffa?w=800&auto=format&fit=crop',
                        alt: 'A sleepy sloth with a gentle smile in the rainforest',
                        photographer: 'Sophia M√ºller',
                        source: 'Unsplash'
                    },
                    {
                        url: 'https://images.unsplash.com/photo-1546026423-cc4642628d2b?w=800&auto=format&fit=crop',
                        alt: 'A curious baby sloth clinging to its mother',
                        photographer: 'Geranimo',
                        source: 'Unsplash'
                    },
                    {
                        url: 'https://images.unsplash.com/photo-1582467905449-56e6c3c5ac26?w=800&auto=format&fit=crop',
                        alt: 'A two-toed sloth moving slowly through the canopy',
                        photographer: 'Du≈°an veverkolog',
                        source: 'Unsplash'
                    },
                    {
                        url: 'https://images.unsplash.com/photo-1597149730216-d3ce0c5d6e90?w=800&auto=format&fit=crop',
                        alt: 'A brown-throated sloth in its natural Costa Rican habitat',
                        photographer: 'Nikolaus Bednarz',
                        source: 'Unsplash'
                    },
                    {
                        url: 'https://images.unsplash.com/photo-1580674684081-7617fbf3d745?w=800&auto=format&fit=crop',
                        alt: 'A maned sloth showing its distinctive fur patterns',
                        photographer: 'Nils Leonhardt',
                        source: 'Unsplash'
                    }
                ];

                const strategies = [
                    // Strategy 1: Enhanced Unsplash API with better search terms
                    async () => {
                        // Try multiple specific sloth search terms
                        const searchTerms = ['sloth animal', 'three toed sloth', 'two toed sloth', 'bradypus', 'choloepus'];
                        const randomTerm = searchTerms[Math.floor(Math.random() * searchTerms.length)];
                        
                        const response = await fetch(`https://api.unsplash.com/photos/random?query=${encodeURIComponent(randomTerm)}&content_filter=high&orientation=landscape`, {
                            headers: {
                                'Authorization': `Client-ID ${unsplashAccessKey}`
                            }
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            // Verify it's likely a sloth photo by checking description and tags
                            const description = (data.alt_description || '').toLowerCase();
                            const tags = data.tags ? data.tags.map(tag => tag.title.toLowerCase()).join(' ') : '';
                            const searchText = (description + ' ' + tags).toLowerCase();
                            
                            if (searchText.includes('sloth') || searchText.includes('bradypus') || searchText.includes('choloepus')) {
                                return {
                                    url: data.urls.regular,
                                    alt: data.alt_description || 'A peaceful sloth in its natural habitat',
                                    photographer: data.user.name,
                                    source: 'Unsplash API'
                                };
                            }
                        }
                        throw new Error('Unsplash API - no verified sloth found');
                    },

                    // Strategy 2: Try Unsplash search endpoint for better results
                    async () => {
                        const response = await fetch(`https://api.unsplash.com/search/photos?query=sloth%20animal&per_page=30&orientation=landscape&content_filter=high`, {
                            headers: {
                                'Authorization': `Client-ID ${unsplashAccessKey}`
                            }
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            if (data.results && data.results.length > 0) {
                                const randomPhoto = data.results[Math.floor(Math.random() * data.results.length)];
                                return {
                                    url: randomPhoto.urls.regular,
                                    alt: randomPhoto.alt_description || 'A sloth in its natural rainforest habitat',
                                    photographer: randomPhoto.user.name,
                                    source: 'Unsplash Search'
                                };
                            }
                        }
                        throw new Error('Unsplash search failed');
                    },

                    // Strategy 3: Use curated sloth photos (guaranteed sloths!)
                    async () => {
                        const randomPhoto = curatedSlothPhotos[Math.floor(Math.random() * curatedSlothPhotos.length)];
                        
                        // Test if the curated photo loads
                        return new Promise((resolve, reject) => {
                            const img = new Image();
                            img.onload = () => resolve(randomPhoto);
                            img.onerror = () => reject(new Error('Curated photo failed to load'));
                            img.src = randomPhoto.url;
                        });
                    },

                    // Strategy 4: Lorem Flickr with sloth-specific search
                    async () => {
                        const randomSeed = Math.floor(Math.random() * 10000);
                        const url = `https://loremflickr.com/800/600/sloth,animal?random=${randomSeed}`;
                        
                        return new Promise((resolve, reject) => {
                            const img = new Image();
                            img.onload = () => resolve({
                                url: url,
                                alt: 'A sloth captured by nature photographers',
                                photographer: 'Flickr Community',
                                source: 'Lorem Flickr'
                            });
                            img.onerror = () => reject(new Error('Lorem Flickr failed'));
                            img.src = url;
                        });
                    }
                ];

                // Try each strategy until one works
                for (const strategy of strategies) {
                    try {
                        photoData = await strategy();
                        if (photoData) break;
                    } catch (err) {
                        console.log('Strategy failed:', err.message);
                        continue;
                    }
                }

                if (!photoData) {
                    throw new Error('All sloth photo sources failed');
                }

                // Display the photo
                slothPhoto.src = photoData.url;
                slothPhoto.alt = photoData.alt;
                photoAlt.textContent = photoData.alt;
                photoSource.textContent = photoData.source;
                
                // Add random sloth fact
                const randomFact = slothFacts[Math.floor(Math.random() * slothFacts.length)];
                slothFact.innerHTML = randomFact;

                // Hide welcome message and show photo
                welcome.style.display = 'none';
                photoDisplay.classList.remove('hidden');

            } catch (err) {
                console.error('Error fetching sloth photo:', err);
                errorMessage.textContent = 'The sloths are taking an extra long nap! Try again in a moment ü¶•';
                error.classList.remove('hidden');
            } finally {
                // Reset button state
                loading.classList.add('hidden');
                findSlothBtn.style.display = 'inline-flex';
            }
        }

        // Handle image loading errors
        slothPhoto.addEventListener('error', function() {
            errorMessage.textContent = 'This sloth photo is being camera-shy! Click to try another one ü¶•';
            error.classList.remove('hidden');
            photoDisplay.classList.add('hidden');
        });

        // Button click handler
        findSlothBtn.addEventListener('click', fetchSlothPhoto);

        // Add instructions for users
        console.log('ü¶• Sloth Photo Finder Ready!');
        console.log('‚úÖ Unsplash API key configured - you should get high-quality sloth photos!');
        console.log('üì∏ The app will try multiple strategies to ensure you always get real sloths');
        console.log('üåø Enjoy your zen sloth moments!');
    </script>
</body>
</html>